<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibha Agro Dairy - Fresh Dairy Products</title>
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;margin:0;padding:0;background-color:#f8f9fa;color:#343a40}.navbar{background-color:#fff;border-bottom:1px solid #dee2e6;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.navbar .logo{font-size:1.5rem;font-weight:700;color:#007bff}.navbar .cart-button{font-size:1rem;font-weight:700;cursor:pointer}.container{max-width:1200px;margin:0 auto;padding:2rem}.hero{background-image:linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url(https://images.unsplash.com/photo-1552035922-1c69a2a72a12?auto=format&fit=crop&w=1950);background-size:cover;background-position:center;color:#fff;padding:6rem 2rem;text-align:center;border-radius:.5rem}.hero h1{font-size:3rem;margin-bottom:1rem}.hero p{font-size:1.25rem}.section-title{text-align:center;font-size:2rem;margin-top:3rem;margin-bottom:2rem}.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem}.product-card{background:#fff;border:1px solid #dee2e6;border-radius:.5rem;text-align:center;overflow:hidden;transition:transform .2s,box-shadow .2s}.product-card:hover{transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.product-card img{width:100%;height:200px;object-fit:cover}.product-card-content{padding:1.5rem}.product-card h3{font-size:1.25rem;margin-top:0;margin-bottom:.5rem}.product-card p{color:#6c757d;margin-bottom:1rem}.product-card .price{font-size:1.5rem;font-weight:700;color:#007bff}#cart-count{background-color:#dc3545;color:#fff;border-radius:50%;padding:.2rem .5rem;font-size:.8rem;vertical-align:top}.add-to-cart-btn{background-color:#007bff;color:#fff;border:none;padding:.75rem 1.5rem;font-size:1rem;border-radius:.25rem;cursor:pointer;margin-top:1rem;transition:background-color .2s}.add-to-cart-btn:hover{background-color:#0056b3}.cart-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4)}.cart-modal-content{background-color:#fefefe;margin:10% auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:.5rem;animation:slide-in .5s ease-out}.close-btn{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}.cart-items-list{list-style:none;padding:0}.cart-item{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid #eee}@keyframes slide-in{from{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Vibha Agro Dairy</div>
        <div class="cart-button" id="open-cart-btn">Cart (<span id="cart-count">0</span>)</div>
    </nav>
    <div class="container">
        <header class="hero">
            <h1>The Freshest Dairy, Delivered.</h1>
            <p>Experience the taste of quality with our range of dairy products.</p>
:q        </header>
        <h2 class="section-title">Our Products</h2>
        <div class="product-grid" id="product-grid"></div>
    </div>
    <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
            <span class="close-btn" id="close-cart-btn">&times;</span>
            <h2>Your Cart</h2>
            <ul id="cart-items" class="cart-items-list"></ul>
            <hr>
            <h3>Total: $<span id="cart-total">0.00</span></h3>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const productGrid = document.getElementById("product-grid");
            const cartCount = document.getElementById("cart-count");
            const cartModal = document.getElementById("cart-modal");
            const openCartBtn = document.getElementById("open-cart-btn");
            const closeCartBtn = document.getElementById("close-cart-btn");
            const cartItemsContainer = document.getElementById("cart-items");
            const cartTotal = document.getElementById("cart-total");
            let productsData = [];
            let cart = [];

            openCartBtn.addEventListener("click", () => cartModal.style.display = "block");
            closeCartBtn.addEventListener("click", () => cartModal.style.display = "none");
            window.addEventListener("click", e => { if (e.target == cartModal) { cartModal.style.display = "none" } });

            function addToCart(productId) {
                const pro:qductToAdd = productsData.find(p => p.id === productId);
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...productToAdd, quantity: 1 });
                }
                updateCartDisplay();
            }

            function updateCartDisplay() {
                cartItemsContainer.innerHTML = "";
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = "<li>Your cart is empty.</li>";
                } else {
                    cart.forEach(item => {
                        const itemEl = document.createElement("li");
                        itemEl.className = "cart-item";
                        itemEl.innerHTML = `<span>${item.name} x ${item.quantity}</span> <span>$${(item.price * item.quantity).toFixed(2)}</span>`;
                        cartItemsContainer.appendChild(itemEl);
                    });
                }
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.innerText = totalItems;
                const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                cartTotal.innerText = total.toFixed(2);
            }

            productGrid.addEventListener("click", e => {
                if (e.target.classList.contains("add-to-cart-btn")) {
                    const productId = parseInt(e.target.dataset.productId);
                    addToCart(productId);
                }
            });

            fetch("/api/products").then(res => res.json()).then(products => {
                productsData = products;
                if (products.length === 0) {
                    productGrid.innerHTML = "<p>No products found.</p>";
                    return;
                }
                products.forEach(product => {
                    const productCard = document.createElement("div");
                    productCard.className = "product-card";
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div class="product-card-content">
                            <h3>${product.name}</h3>
                            <p>${product.description}</p>
                            <div class="price">$ ${product.price.toFixed(2)}</div>
                            <button class="add-to-cart-btn" data-product-id="${product.id}">Add to Cart</button>
                        </div>`;
:q                    productGrid.appendChild(productCard);
                });
            });
        });
    </script>
</body>
</html>
