<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibha Agro Dairy - Fresh Dairy Products</title>
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;margin:0;padding:0;background-color:#f8f9fa;color:#343a40}.navbar{background-color:#fff;border-bottom:1px solid #dee2e6;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.navbar .logo{font-size:1.5rem;font-weight:700;color:#007bff}.navbar .cart-button{font-size:1rem;font-weight:700;cursor:pointer}.banner{position:relative;width:100%;height:400px;overflow:hidden}.banner img{width:100%;height:100%;object-fit:cover}.banner-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.4);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;color:#fff;padding:2rem}.banner-overlay h2{font-size:2.5rem;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.banner-overlay p{font-size:1.25rem;max-width:600px;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.container{max-width:1200px;margin:0 auto;padding:2rem}.hero{background-image:linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url(https://images.unsplash.com/photo-1552035922-1c69a2a72a12?auto=format&fit=crop&w=1950);background-size:cover;background-position:center;color:#fff;padding:6rem 2rem;text-align:center;border-radius:.5rem}.hero h1{font-size:3rem;margin-bottom:1rem}.hero p{font-size:1.25rem}.section-title{text-align:center;font-size:2rem;margin-top:3rem;margin-bottom:2rem}.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem}.product-card{background:#fff;border:1px solid #dee2e6;border-radius:.5rem;text-align:center;overflow:hidden;transition:transform .2s,box-shadow .2s}.product-card:hover{transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.product-card img{width:100%;height:200px;object-fit:cover}.product-card-content{padding:1.5rem}.product-card h3{font-size:1.25rem;margin-top:0;margin-bottom:.5rem}.product-card p{color:#6c757d;margin-bottom:1rem}.product-card .price{font-size:1.5rem;font-weight:700;color:#007bff}#cart-count{background-color:#dc3545;color:#fff;border-radius:50%;padding:.2rem .5rem;font-size:.8rem;vertical-align:top}.add-to-cart-btn{background-color:#007bff;color:#fff;border:none;padding:.75rem 1.5rem;font-size:1rem;border-radius:.25rem;cursor:pointer;margin-top:1rem;transition:background-color .2s}.add-to-cart-btn:hover{background-color:#0056b3}.button-group{display:flex;gap:.5rem;margin-top:1rem}.order-now-btn{background-color:#28a745;color:#fff;border:none;padding:.75rem 2rem;font-size:1.1rem;border-radius:.25rem;cursor:pointer;transition:background-color .2s}.order-now-btn:hover{background-color:#218838}.cart-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4)}.cart-modal-content{background-color:#fefefe;margin:10% auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:.5rem;animation:slide-in .5s ease-out}.close-btn{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}.cart-items-list{list-style:none;padding:0}.cart-item{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid #eee}.cart-item-info{display:flex;flex-direction:column;gap:.5rem}.item-name{font-weight:600}.quantity-controls{display:flex;align-items:center;gap:.5rem}.quantity-btn{background-color:#6c757d;color:#fff;border:none;width:28px;height:28px;border-radius:4px;cursor:pointer;font-size:1.1rem;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:background-color .2s}.quantity-btn:hover{background-color:#5a6268}.quantity-display{font-weight:600;min-width:20px;text-align:center}.cart-item-actions{display:flex;align-items:center;gap:1rem}.item-price{font-weight:600}.delete-btn{background-color:#dc3545;color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;font-size:1.2rem;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:background-color .2s}.delete-btn:hover{background-color:#c82333}.cart-actions{text-align:center;margin-top:1.5rem}.map-section{background-color:#f8f9fa;padding:3rem 0;margin-top:3rem}.map-description{text-align:center;font-size:1.1rem;color:#6c757d;margin-bottom:2rem;max-width:600px;margin-left:auto;margin-right:auto}.map-container{border-radius:.5rem;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.1);margin-bottom:2rem}.location-info{background:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 2px 8px rgba(0,0,0,.1);text-align:center}.location-info h3{color:#007bff;margin-bottom:1rem;font-size:1.5rem}.location-info p{margin-bottom:.75rem;line-height:1.6}.location-info strong{color:#343a40}.footer{background-color:#343a40;color:#fff;padding:2rem 0;margin-top:3rem}@keyframes slide-in{from{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Vibha Agro Dairy</div>
        <div class="cart-button" id="open-cart-btn">Cart (<span id="cart-count">0</span>)</div>
    </nav>
    
    <!-- Banner Section -->
    <div class="banner">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=1950" alt="Cow grazing in green field">
        <div class="banner-overlay">
            <h2>Fresh from Our Farms</h2>
            <p>Pure dairy products from happy cows grazing in natural pastures</p>
        </div>
    </div>
    
    <div class="container">
        <header class="hero">
            <h1>The Freshest Dairy, Delivered.</h1>
            <p>Experience the taste of quality with our range of dairy products.</p>
        </header>
        <h2 class="section-title">Our Products</h2>
        <div class="product-grid" id="product-grid"></div>
    </div>
    
    <!-- Map Section -->
    <div class="map-section">
        <div class="container">
            <h2 class="section-title">Visit Our Farm</h2>
            <p class="map-description">Come visit our farm and see how we produce the freshest dairy products</p>
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3597.1234567890123!2d85.2575!3d25.778694!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjXCsDQ2JzQzLjMiTiA4NcKwMTUnMjcuMCJF!5e0!3m2!1sen!2sin!4v1234567890123"
                    width="100%" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <div class="location-info">
                <h3>Farm Location</h3>
                <p><strong>Coordinates:</strong> 25°46'43.3"N 85°15'27.0"E</p>
                <p><strong>Address:</strong> Vibha Agro Dairy Farm, Bihar, India</p>
                <p><strong>Directions:</strong> Located in the heart of Bihar's dairy region</p>
            </div>
        </div>
    </div>
    
    <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
            <span class="close-btn" id="close-cart-btn">&times;</span>
            <h2>Your Cart</h2>
            <ul id="cart-items" class="cart-items-list"></ul>
            <hr>
            <h3>Total: $<span id="cart-total">0.00</span></h3>
            <div class="cart-actions">
                <button id="order-now-btn" class="order-now-btn" style="display: none;">Order Now</button>
            </div>
        </div>
    </div>
    
    <!-- Footer Section -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Vibha Agro Dairy</h3>
                <p>Fresh dairy products delivered to your doorstep</p>
            </div>
            <div class="footer-section">
                <h4>Contact Information</h4>
                <p><strong>Proprietor:</strong> Shanvi Singh</p>
                <p><strong>Phone:</strong> <a href="tel:9246871484">+91 9246871484</a></p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <p>Fresh Milk • Curd • Buffalo Milk</p>
                <p>Desi Cow Milk • Eggs • Greek Yogurt</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Vibha Agro Dairy. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const productGrid = document.getElementById("product-grid");
            const cartCount = document.getElementById("cart-count");
            const cartModal = document.getElementById("cart-modal");
            const openCartBtn = document.getElementById("open-cart-btn");
            const closeCartBtn = document.getElementById("close-cart-btn");
            const cartItemsContainer = document.getElementById("cart-items");
            const cartTotal = document.getElementById("cart-total");
            const orderNowBtn = document.getElementById("order-now-btn");
            let productsData = [];
            let cart = [];

            openCartBtn.addEventListener("click", () => cartModal.style.display = "block");
            closeCartBtn.addEventListener("click", () => cartModal.style.display = "none");
            window.addEventListener("click", e => { if (e.target == cartModal) { cartModal.style.display = "none" } });

            function addToCart(productId) {
                const productToAdd = productsData.find(p => p.id === productId);
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...productToAdd, quantity: 1 });
                }
                updateCartDisplay();
            }

            function updateCartDisplay() {
                cartItemsContainer.innerHTML = "";
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = "<li>Your cart is empty.</li>";
                    orderNowBtn.style.display = "none";
                } else {
                    cart.forEach((item, index) => {
                        const itemEl = document.createElement("li");
                        itemEl.className = "cart-item";
                        itemEl.innerHTML = `
                            <div class="cart-item-info">
                                <span class="item-name">${item.name}</span>
                                <div class="quantity-controls">
                                    <button class="quantity-btn decrease-btn" data-index="${index}">-</button>
                                    <span class="quantity-display">${item.quantity}</span>
                                    <button class="quantity-btn increase-btn" data-index="${index}">+</button>
                                </div>
                            </div>
                            <div class="cart-item-actions">
                                <span class="item-price">$${(item.price * item.quantity).toFixed(2)}</span>
                                <button class="delete-btn" data-index="${index}">×</button>
                            </div>`;
                        cartItemsContainer.appendChild(itemEl);
                    });
                    orderNowBtn.style.display = "block";
                }
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.innerText = totalItems;
                const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                cartTotal.innerText = total.toFixed(2);
            }

            productGrid.addEventListener("click", e => {
                if (e.target.classList.contains("add-to-cart-btn")) {
                    const productId = parseInt(e.target.dataset.productId);
                    addToCart(productId);
                }
            });

            orderNowBtn.addEventListener("click", () => {
                if (cart.length > 0) {
                    const orderItems = cart.map(item => `${item.name} x${item.quantity}`).join(", ");
                    alert(`Order placed for: ${orderItems}\nTotal: $${cartTotal.innerText}\nThank you for your order! We'll contact you soon for delivery details.`);
                    cart = [];
                    updateCartDisplay();
                    cartModal.style.display = "none";
                }
            });

            cartItemsContainer.addEventListener("click", e => {
                if (e.target.classList.contains("delete-btn")) {
                    const index = parseInt(e.target.dataset.index);
                    cart.splice(index, 1);
                    updateCartDisplay();
                }
                if (e.target.classList.contains("increase-btn")) {
                    const index = parseInt(e.target.dataset.index);
                    cart[index].quantity++;
                    updateCartDisplay();
                }
                if (e.target.classList.contains("decrease-btn")) {
                    const index = parseInt(e.target.dataset.index);
                    if (cart[index].quantity > 1) {
                        cart[index].quantity--;
                    } else {
                        cart.splice(index, 1);
                    }
                    updateCartDisplay();
                }
            });

            fetch("/api/products").then(res => res.json()).then(products => {
                productsData = products;
                if (products.length === 0) {
                    productGrid.innerHTML = "<p>No products found.</p>";
                    return;
                }
                products.forEach(product => {
                    const productCard = document.createElement("div");
                    productCard.className = "product-card";
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div class="product-card-content">
                            <h3>${product.name}</h3>
                            <p>${product.description}</p>
                            <div class="price">$ ${product.price.toFixed(2)}</div>
                            <button class="add-to-cart-btn" data-product-id="${product.id}">Add to Cart</button>
                        </div>`;
                    productGrid.appendChild(productCard);
                });
            });
        });
    </script>
</body>
</html>
